<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="Cache-Control"
	content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<title>Τίτλος</title>
<link rel="stylesheet" href="./jquery-ui/jquery-ui.css">
<script src="./jquery-3.2.1.js"></script>
<script src="./jquery-ui/jquery-ui.js"></script>

<script>
function callAjax(){
	 
	$.ajax({
		url: "http://localhost:8080/paraga/api/person/all",
	    type: "GET",
	    dataType: "json",
	    contentType: "application/json"
	    
	})
	.fail(function(){
    	$("#result").text("error");
	}
	)
	.done(function(ajaxResult ){
		 
		var data =  ajaxResult.data;
		for(var i =0 ; i < data.length ; i++){//me mia for diatrexoume ola ta stoixeia tou adikeimenou data.
			var paragraph = '<p>'+data[i].name+' '+data[i].surname+'</p>';//orizoume ena adikeimeno paragraph kai vazoume mesa se auto to name tou i stoixeiou tou data kai meta to surname tou i stoixeiou tou data.
			$("#result").append(paragraph);//prosthetoume sto div me id result to paragraph pou dhmiourgisame prohgoumenws.
		}
	}

	)
	;
}

$(document).ready(function(){ // xrhsimopoioume thn biblio8hkh jquery-ui.min.js kai auth h entolh sumainei otan einai fortomenh h selida ektelese
	$('#but1').click(function(e) { // προσθηκη συνάρτηση στο click του button
		callAjax();
	});
    
});
</script>
<body>
	Σε αυτό το παράδειγμα συνεχίζουμε την κλήση του προηγούμενου παραδείγματος, αλλά αυτήν την φορά δείχνουμε πως μπορούμε να εκτεμεταλευτούμε το 
	αντικείμενο που μας επιστρέφει η ajax κλήση.
	Στο επιστρεφόμενο αντικείμενο, τα δεδομένα που θέλουμε για τους παίκτες βρίσκονται μέσα στο array data. 
	Πέρνουμε το array και με ένα for loop δημιουργούμε παραγράφους μέσα στο div με Id result. Από κάθε στοιχείο του array πέρνουμε το όνομα και το 
	επίθετο του παίχτη.
	Το τι περιέχει το αντικείμενο μας το ξέρουμε από το swagger της κλήσης.	
	
	<button id="but1">callAjax</button>
	<br/>
	
	<div id="result" ></div>	
</body>
</html>